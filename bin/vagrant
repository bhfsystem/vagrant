#!/usr/bin/env bash

if [[ -n "${DEBUG:-}" ]]; then
  echo VAGRANT_DEFAULT_PROVIDER "${VAGRANT_DEFAULT_PROVIDER:-}" 1>&2
fi

function main {
  local shome="$(cd -P -- "${BASH_SOURCE%/*}/.." && pwd -P)"
  source "$shome/script/profile"

  export BUNDLE_GEMFILE="$shome/vendor/vagrant/Gemfile"
  if [[ -d .terraform ]]; then
    exec fogg env bundle exec vagrant "$@"
  else
    exec bundle exec vagrant "$@"
  fi
}

source sub "$0" "$@"
